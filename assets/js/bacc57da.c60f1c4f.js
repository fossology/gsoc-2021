"use strict";(self.webpackChunkgosc=self.webpackChunkgosc||[]).push([[8151],{36241:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var i=s(74848),t=s(28453);const l={slug:"/cmake-cweek3",title:"New build system - Week 3",authors:"avinal",tags:["coding-week","cmake"]},r="Coding Week 3 Meeting",o={permalink:"/gsoc/blog/cmake-cweek3",editUrl:"https://github.com/fossology/gsoc/edit/main/blog/2021-06-23-cmake-w3.md",source:"@site/blog/2021-06-23-cmake-w3.md",title:"New build system - Week 3",description:"\x3c!--",date:"2021-06-23T00:00:00.000Z",tags:[{inline:!0,label:"coding-week",permalink:"/gsoc/blog/tags/coding-week"},{inline:!0,label:"cmake",permalink:"/gsoc/blog/tags/cmake"}],readingTime:1.475,hasTruncateMarker:!0,authors:[{name:"Avinal",url:"https://github.com/avinal",email:"opensource@avinal.space",socials:{x:"https://x.com/Avinal_",github:"https://github.com/avinal"},imageURL:"https://avatars.githubusercontent.com/u/74113200?v=4",key:"avinal",page:null}],frontMatter:{slug:"/cmake-cweek3",title:"New build system - Week 3",authors:"avinal",tags:["coding-week","cmake"]},unlisted:!1},a={authorsImageUrls:[void 0]},c=[{value:"Attendees",id:"attendees",level:3},{value:"Week 2 Progress",id:"week-2-progress",level:3},{value:"Discussions",id:"discussions",level:3},{value:"Conclusion and Further Plans",id:"conclusion-and-further-plans",level:3}];function h(e){const n={a:"a",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"attendees",children:"Attendees"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Michael C. Jaeger ",(0,i.jsx)(n.a,{href:"https://github.com/mcjaeger",children:"https://github.com/mcjaeger"})]}),"\n",(0,i.jsxs)(n.li,{children:["Gaurav Mishra ",(0,i.jsx)(n.a,{href:"https://github.com/GMishx",children:"https://github.com/GMishx"})]}),"\n",(0,i.jsxs)(n.li,{children:["Sarita Singh ",(0,i.jsx)(n.a,{href:"https://github.com/itssingh",children:"https://github.com/itssingh"})]}),"\n",(0,i.jsxs)(n.li,{children:["Avinal Kumar ",(0,i.jsx)(n.a,{href:"https://github.com/avinal",children:"https://github.com/avinal"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"week-2-progress",children:"Week 2 Progress"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Version file Implementation"}),"\n",(0,i.jsx)(n.li,{children:"Initial functions on obtaining commit and branch info"}),"\n",(0,i.jsxs)(n.li,{children:["To test the current progress, follow the instructions ",(0,i.jsx)(n.a,{href:"https://github.com/avinal/FOSSology/wiki#test-the-new-system-only-gcc-with-make-and-ninja-tested-for-now",children:"here"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"discussions",children:"Discussions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What is the regex expression used for obtaining version information?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The regex has recently been modified to cover recent versions. The latest form is as below:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"([[:digit:]]+.[[:digit:]]+.[[:digit:]]+)(-?rc[[:digit:]]+)?-?([[:digit:]]*)-?[[:alnum:]]*\n"})}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"You can also try alternatives to regex if possible for CMake."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Should I use"})," ",(0,i.jsx)(n.code,{children:"git describe --tags"})," ",(0,i.jsx)(n.strong,{children:"or"})," ",(0,i.jsx)(n.code,{children:"git describe --always HEAD"})," ",(0,i.jsx)(n.strong,{children:"for obtaining version information?"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In FOSSology we always use :code:",(0,i.jsx)(n.code,{children:"git describe --tags"}),", no exception whatsoever."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["CMake provides a preset configuration for the install path on GNU systems, you can see the description ",(0,i.jsx)(n.a,{href:"https://cmake.org/cmake/help/v3.10/module/GNUInstallDirs.html",children:"here"})," based on the ",(0,i.jsx)(n.a,{href:"https://www.gnu.org/prep/standards/html_node/Directory-Variables.html",children:"configuration"})," suggested by the GNU. After comparing the variables defined in Makefile.conf with these, it seems directly taken from GNU standards.\nSo I wanted to ask if this would be okay to stick to the presets, instead of manually declaring the same paths? The former step will reduce the number of variables we are currently caching and will make it flexible for different installation scenarios."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Using the GNU standards is the ideal situation but FOSSology uses slightly different locations. For example, all agents end up under ",(0,i.jsx)(n.code,{children:"/usr/local/share/fossology/"})," with their individual folders instead of going to ",(0,i.jsx)(n.code,{children:"/usr/local/bin/"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["If the same results can be achieved by using the ",(0,i.jsx)(n.code,{children:"CMAKE_INSTALL_<dir>"})," and ",(0,i.jsx)(n.code,{children:"CMAKE_INSTALL_PREFIX"})," then yeah, it will be preferred."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"conclusion-and-further-plans",children:"Conclusion and Further Plans"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Try adding the version and commit hash info."}),"\n",(0,i.jsx)(n.li,{children:"Implement writing version files for each build."}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var i=s(96540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);